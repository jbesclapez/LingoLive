---
description: 
globs: 
alwaysApply: true
---
# LingoLive â€“ Cursor Directory Rules

## ğŸ‘¤ Developer Profile
You are a **Senior Kotlin developer** building an Android 12 (API 31) application with local AI models for real-time voice translation. You follow clean architecture, MVI pattern, SOLID principles, and Kotlin best practices.

---

## ğŸ¯ Project Goals

- Translate speech between speakers in real time using on-device models (Whisper, NLLB-200, Coqui TTS)
- Ensure low-latency, reliable and scalable architecture
- Use Kotlin, ViewBinding, Flow/LiveData, and XML UI
- Avoid Jetpack Compose entirely
- Ensure future compatibility with iOS and smartwatches

---

## ğŸ§  Global Programming Guidelines (Kotlin)

### Naming

- Classes â†’ `PascalCase`
- Variables, functions â†’ `camelCase`
- Files and directories â†’ `underscored_case`
- Booleans â†’ prefixed with `is`, `has`, `can`
- Constants â†’ `UPPER_CASE`

### Structure

- Use `val` over `var` for immutability
- Avoid `any`; type all variables/functions explicitly
- Avoid magic numbers; extract constants
- Use `data class` and `sealed class` for state
- Prefer short functions (â‰¤ 20 lines) with a single purpose
- Start functions with a verb
- Return booleans with `isX`, `hasX`, `canX`
- Avoid deep nesting â†’ use early returns or utility functions
- Use default parameters instead of null checks
- Use RO-RO pattern for multi-param functions

---

## ğŸ§± Architecture Standards

- Clean Architecture: UI â†’ ViewModel â†’ UseCase â†’ Repository â†’ Data
- MVI Pattern for state and events in ViewModel
- ViewBinding for all view access (no findViewById)
- Flow or LiveData for observable state
- ConstraintLayout for layouts
- Material 3 components only
- Navigation handled via Navigation Component
- No Jetpack Compose allowed

---

## ğŸ§ª Testing Conventions

- Unit tests follow Arrange-Act-Assert
- Clear variable names: `inputX`, `expectedX`, `mockX`, etc.
- Use mocks for dependencies
- Write integration tests for AI module chains
- Measure latency and stability under stress

---

## ğŸ“ Directory Structure Expected

- `ui/` â†’ Activities and Fragments
- `viewmodel/` â†’ ViewModels with MVI logic
- `domain/` â†’ Business logic and models
- `data/` â†’ Local/remote data source implementations
- `tts/`, `stt/`, `translator/` â†’ AI integration layers

---

## ğŸ¤– Cursor Behavior

Cursor should:
- Apply these rules automatically when generating or editing code
- Suggest only idiomatic Kotlin and MVI-compliant patterns
- Avoid Jetpack Compose entirely
- Prefer clean, typed, readable code

docs/
â”œâ”€â”€ architecture/
â”‚   â”œâ”€â”€ overview.md           # High-level architecture
â”‚   â”œâ”€â”€ modules.md           # Detailed module descriptions
â”‚   â””â”€â”€ data-flow.md         # Data flow diagrams
â”œâ”€â”€ phases/
â”‚   â”œâ”€â”€ phase1-android.md    # Android MVP details
â”‚   â”œâ”€â”€ phase2-wearos.md     # Wear OS integration
â”‚   â”œâ”€â”€ phase3-ios.md        # iOS port
â”‚   â””â”€â”€ phase4-watchos.md    # Apple Watch integration
â”œâ”€â”€ technical/
â”‚   â”œâ”€â”€ stt-implementation.md # Whisper implementation details
â”‚   â”œâ”€â”€ translation.md       # NLLB-200 and other translation engines
â”‚   â”œâ”€â”€ tts-implementation.md # Coqui TTS implementation
â”‚   â””â”€â”€ speaker-diarization.md # Speaker identification
â””â”€â”€ requirements/
    â”œâ”€â”€ functional.md        # Functional requirements
    â”œâ”€â”€ technical.md         # Technical requirements
    â””â”€â”€ constraints.md       # Technical constraints

app/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ audio/              # Audio processing
â”‚   â”‚   â”œâ”€â”€ recorder/      # Audio recording
â”‚   â”‚   â””â”€â”€ player/        # Audio playback
â”‚   â”œâ”€â”€ stt/               # Speech-to-Text
â”‚   â”‚   â”œâ”€â”€ whisper/      # Whisper implementation
â”‚   â”‚   â””â”€â”€ diarization/  # Speaker identification
â”‚   â”œâ”€â”€ translation/       # Translation engines
â”‚   â”‚   â”œâ”€â”€ nllb/         # NLLB implementation
â”‚   â”‚   â””â”€â”€ api/          # Cloud translation APIs
â”‚   â””â”€â”€ tts/              # Text-to-Speech
â”‚       â”œâ”€â”€ coqui/        # Coqui implementation
â”‚       â””â”€â”€ system/       # System TTS fallback
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/            # Domain models
â”‚   â”œâ”€â”€ repository/       # Repository interfaces
â”‚   â””â”€â”€ usecase/         # Use cases
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ main/            # Main activity
â”‚   â”œâ”€â”€ conversation/    # Conversation UI
â”‚   â””â”€â”€ settings/        # App settings
â””â”€â”€ di/                  # Dependency injection
